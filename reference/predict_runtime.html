<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Predict the elapsed runtime of the next call to <code>make()</code>
for non-staged parallel backends. — predict_runtime • drake</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Predict the elapsed runtime of the next call to <code>make()</code>
for non-staged parallel backends. — predict_runtime" />

<meta property="og:description" content="Take the past recorded runtimes times from
build_times() and use them to predict how the targets
will be distributed among the available workers in the
next make(). Then, predict the overall runtime to be the
runtime of the slowest (busiest) workers.
Predictions only include the time it takes to run the targets,
not overhead/preprocessing from drake itself." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">drake</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">6.2.1.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/drake.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="https://ropenscilabs.github.io/drake-manual/faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/drake">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Predict the elapsed runtime of the next call to <code>make()</code>
for non-staged parallel backends.</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/drake/blob/master/R/api-predict.R'><code>R/api-predict.R</code></a></small>
    <div class="hidden name"><code>predict_runtime.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Take the past recorded runtimes times from
<code><a href='build_times.html'>build_times()</a></code> and use them to predict how the targets
will be distributed among the available workers in the
next <code><a href='make.html'>make()</a></code>. Then, predict the overall runtime to be the
runtime of the slowest (busiest) workers.
Predictions only include the time it takes to run the targets,
not overhead/preprocessing from <code>drake</code> itself.</p>
    
    </div>

    <pre class="usage"><span class='fu'>predict_runtime</span>(<span class='no'>config</span>, <span class='kw'>targets</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>from_scratch</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>targets_only</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>known_times</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/numeric'>numeric</a></span>(<span class='fl'>0</span>),
  <span class='kw'>default_time</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>warn</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>config</th>
      <td><p>Optional internal runtime parameter list of
produced by both <code><a href='make.html'>make()</a></code> and
<code><a href='drake_config.html'>drake_config()</a></code>.</p></td>
    </tr>
    <tr>
      <th>targets</th>
      <td><p>Character vector, names of targets.
Predict the runtime of building these targets
plus dependencies.
Defaults to all targets.</p></td>
    </tr>
    <tr>
      <th>from_scratch</th>
      <td><p>Logical, whether to predict a
<code><a href='make.html'>make()</a></code> build from scratch or to
take into account the fact that some targets may be
already up to date and therefore skipped.</p></td>
    </tr>
    <tr>
      <th>targets_only</th>
      <td><p>Deprecated.</p></td>
    </tr>
    <tr>
      <th>jobs</th>
      <td><p>The <code>jobs</code> argument of your next planned
<code><a href='make.html'>make()</a></code>. How many targets to do you plan
to have running simultaneously?</p></td>
    </tr>
    <tr>
      <th>known_times</th>
      <td><p>A named numeric vector with targets/imports
as names and values as hypothetical runtimes in seconds.
Use this argument to overwrite any of the existing build times
or the <code>default_time</code>.</p></td>
    </tr>
    <tr>
      <th>default_time</th>
      <td><p>Number of seconds to assume for any
target or import with no recorded runtime (from <code><a href='build_times.html'>build_times()</a></code>)
or anything in <code>known_times</code>.</p></td>
    </tr>
    <tr>
      <th>warn</th>
      <td><p>Logical, whether to warn the user about
any targets with no available runtime, either in
<code>known_times</code> or <code><a href='build_times.html'>build_times()</a></code>. The times for these
targets default to <code>default_time</code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='predict_load_balancing.html'>predict_load_balancing()</a></code>, <code><a href='build_times.html'>build_times()</a></code>, <code><a href='make.html'>make()</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='fu'><a href='test_with_dir.html'>test_with_dir</a></span>(<span class='st'>"Quarantine side effects."</span>, {
<span class='kw'>if</span> (<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/ns-load'>requireNamespace</a></span>(<span class='st'>"knitr"</span>)) {
<span class='fu'><a href='load_mtcars_example.html'>load_mtcars_example</a></span>() <span class='co'># Get the code with drake_example("mtcars").</span>
<span class='fu'><a href='make.html'>make</a></span>(<span class='no'>my_plan</span>) <span class='co'># Run the project, build the targets.</span>
<span class='no'>config</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='drake_config.html'>drake_config</a></span>(<span class='no'>my_plan</span>)
<span class='no'>known_times</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/rep'>rep</a></span>(<span class='fl'>7200</span>, <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>my_plan</span>))
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/names'>names</a></span>(<span class='no'>known_times</span>) <span class='kw'>&lt;-</span> <span class='no'>my_plan</span>$<span class='no'>target</span>
<span class='no'>known_times</span>
<span class='co'># Predict the runtime</span>
<span class='kw'>if</span> (<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/ns-load'>requireNamespace</a></span>(<span class='st'>"lubridate"</span>, <span class='kw'>quietly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)) {
<span class='fu'>predict_runtime</span>(
  <span class='no'>config</span>,
  <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fl'>7</span>,
  <span class='kw'>from_scratch</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>known_times</span> <span class='kw'>=</span> <span class='no'>known_times</span>
)
<span class='fu'>predict_runtime</span>(
  <span class='no'>config</span>,
  <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fl'>8</span>,
  <span class='kw'>from_scratch</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>known_times</span> <span class='kw'>=</span> <span class='no'>known_times</span>
)
<span class='no'>balance</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='predict_load_balancing.html'>predict_load_balancing</a></span>(
  <span class='no'>config</span>,
  <span class='kw'>jobs</span> <span class='kw'>=</span> <span class='fl'>7</span>,
  <span class='kw'>from_scratch</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>known_times</span> <span class='kw'>=</span> <span class='no'>known_times</span>
)
<span class='no'>balance</span>
}
}
})
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

